<!--
Google IO 2012 HTML5 Slide Template

Authors: Eric Bidelman <ebidel@gmail.com>
         Luke Mahé <lukem@google.com>

URL: https://code.google.com/p/io-2012-slides
-->
<!DOCTYPE html>
<html>
<head>
  <title>Introducción a Rails 3</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <!--<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">-->
  <!--<meta name="viewport" content="width=device-width, initial-scale=1.0">-->
  <!--This one seems to work all the time, but really small on ipad-->
  <!--<meta name="viewport" content="initial-scale=0.4">-->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="stylesheet" media="all" href="theme/css/default.css">
  <link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="theme/css/phone.css">
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->
  <script data-main="js/slides" src="js/require-1.0.8.min.js"></script>
</head>
<body style="opacity: 0">

<slides class="layout-widescreen">

  <slide class="logoslide nobackground">
    <article class="flexbox vcenter">
      <span><img src="images/ror.png"></span>
    </article>
  </slide>

  <slide class="title-slide segue nobackground">
    <!-- The content of this hgroup is replaced programmatically through the slide_config.json. -->
    <hgroup class="auto-fadein">
      <h1 data-config-title><!-- populated from slide_config.json --></h1>
      <h2 data-config-subtitle><!-- populated from slide_config.json --></h2>
      <p data-config-presenter><!-- populated from slide_config.json --></p>
    </hgroup>
  </slide>

  <slide class="segue dark nobackground">
    <aside class="gdbar"><img src="images/ruby.png" height="128px"></aside>
    <hgroup class="auto-fadein">
      <h2>Ruby</h2>
    </hgroup>
  </slide>
  
  <slide>
    <hgroup>
      <h2><img src="images/ruby.png" height="50px"> Ruby</h2>
    </hgroup>
    <article>
      <ul class="build fade">
        <li>Lenguaje dinámico</li>
        <li>Orientado a objetos</li>
        <li>Saltos de línea como final de sentencia</li>
        <li>Trabaja con bloques
			<ul>
				Terminados con <b>end</b>
			</ul>
		</li>
		<li>Funciones no necesitan paréntesis para recibir parámetros</li>
      </ul>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2><img src="images/ruby.png" height="50px"> Ruby: Ejemplos de código</h2>
	  <h3>if..else</h3>
    </hgroup>
    <article>
	<pre class="prettyprint" data-lang="ruby">
if a > b then
  # Hacer algo
else
  # Hacer otra cosa
end
	</pre>  
    </article>
  </slide>
  
  <slide>
    <hgroup>
      <h2><img src="images/ruby.png" height="50px"> Ruby: Ejemplos de código</h2>
	  <h3>Iteración</h3>
    </hgroup>
    <article>
	<h4>while</h4>
	<pre class="prettyprint" data-lang="ruby">
while i < 10 do
  suma += i
  i += 1
end
	</pre>  
	<h4>.each do</h4>
	<pre class="prettyprint" data-lang="ruby">
@usuarios<b>.each do |user|</b>
  user.nombre = "Juan"
<b>end</b>
	</pre>  
    </article>
  </slide>
  
  <slide>
    <hgroup>
      <h2>Aprender Ruby</h2>
    </hgroup>
    <article>
      <iframe data-src="http://tryruby.org/"></iframe>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2>Gemas</h2>
    </hgroup>
    <article>
      <ul >
		<li>Paquetes listos para usar</li>
		<li>Fácil instalación y manejo</li>
		<li>Funcionalidad hecha y probada</li>
		<li><a href="http://rubygems.org">RubyGems.org</a> y <a href="https://www.ruby-toolbox.com/">The Ruby Toolbox</a></li>			
	  </ul>
    </article>
  </slide>
  
  <slide class="segue dark nobackground">
    <aside class="gdbar"><img src="images/ror.png" height="128px"></aside>
    <hgroup class="auto-fadein">
      <h2>Ruby on Rails</h2>
    </hgroup>
  </slide>
  
  <slide>
    <hgroup>
      <h2><img src="images/ror.png" height="70px"> ¿Qué es RoR?</h2>
    </hgroup>
    <article>
      <ul class="build fade">
        <li>Es un framework</li>
        <li>Basado en Ruby</li>
        <li>Permite la construcción <b>fácil y rápida</b> de aplicaciones web</li>
        <li>Usado en grandes proyectos<br />
				<img src="images/groupon.png" height="100px">
		</li>
      </ul>
    </article>
  </slide>
  
  <slide>
    <hgroup>
      <h2>¿Por qué un framework?</h2>
    </hgroup>
    <article>
      <ul class="">
        <li>La programación <i>más complicada</i> ya <b>está lista</b></li>
		<ul>
			<li>Arquitectura básica <b>probada</b></li>
			<li>El programador se preocupa de lo importante: <b>Funcionalidad diferenciadora</b></li>			
		</ul>
		<li>Preocuparse por el código, no la configuración</li>
		<li>Templates (vistas reutilizables)</li>
		<li><b>Rapidez de desarrollo</b></li>
      </ul>
    </article>
  </slide>
  
  <slide>
    <hgroup>
      <h2>PHP vs Rails</h2>
    </hgroup>
    <article>
<pre class="prettyprint" data-lang="php">
$db = new phpDB();
$db->connect();
if( $_GET['action'] == 'create' ) {
	$db->exec('INSERT INTO alumnos (nombre, username, password, rol, fecha_nacimiento)'
  .' VALUES ($1, $2, $3, $4, $5)'
  , array($_POST['nombre'], $_POST['username'], $_POST['password'], $_POST['rol'], $_POST['fecha']));
	$db->close();
  header('Location: ../new_alumno.php?success=true');
</pre>

<pre class="prettyprint" data-lang="ruby">
def create
  @usuario = Usuario.new(params[:usuario])
  @usuario.save
end
</pre>
    </article>
  </slide>

  <slide>
    <hgroup>
      <h2><img src="images/ror.png" height="70px"> Comenzando con Rails</h2>
    </hgroup>
    <article>
        <h3><b>Windows</b></h3>
		<p>Instalador one-click: <a href="http://railsinstaller.org/">RailsInstaller.org</a></p>
        <h3><b>Linux</b></h3>
		<p>Instalar <a href="https://rvm.io/rvm/install/">RVM</a> con rails</p>
<pre class="prettyprint" data-lang="sh">
curl -L https://get.rvm.io | bash -s stable --rails
</pre>
      <h3>Instalar un Editor</h3>
	  <p><b><a href="http://www.sublimetext.com/2">SublimeText2</a></b></p>
    </article>
  </slide>
  
  <slide class="segue dark nobackground">   
    <hgroup class="auto-fadein">
      <h2>MVC</h2>
	  <h3>Model View Controller</h3>
    </hgroup>
  </slide>
  
  <slide>
    <hgroup>
      <h2>Modelo</h2>
    </hgroup>
    <article>
      <ul class="">
        <li><b>Objeto</b> que representa una <b>entidad</b></li>
		<li>Cada modelo es una <b>tabla</b> de la base de datos</li>
		<li>Contiene la lógica</li>
      </ul>
<pre class="prettyprint" data-lang="ruby">
class Usuario <b>< ActiveRecord::Base</b>
  attr_accesible :nombre, :rut, :edad
end
</pre>	  
    </article>
  </slide>  
  
  <slide>
    <hgroup>
      <h2>Vista</h2>
    </hgroup>
    <article>
      <ul class="">
        <li>Código que se renderiza en el navegador</li>
		<li>Se convierte a HTML</li>		
      </ul>
<pre class="prettyprint" data-lang="html">
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Hello World&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    <b>&lt;%= yield %&gt;</b>
  &lt;/body&gt;
&lt;/html&gt;  
</pre>	  
    </article>
  </slide>  
  
  <slide>
    <hgroup>
      <h2>Controlador</h2>
    </hgroup>
    <article>
      <ul class="">
        <li>Intermediario entre vistas y modelos</li>
		<li>Recibe la información enviada desde las vistas</li>
		<li>Prepara las variables que se usarán en las vistas</li>		
      </ul>
<pre class="prettyprint" data-lang="ruby">
class UsuarioController < ApplicationController
  def index
    @usuarios = Usuario.all
  end
end
</pre>	  
    </article>
  </slide>  
  
  <slide>
    <hgroup>
      <h2>MVC</h2>
    </hgroup>
	<article class="flexbox vcenter">
		<img src="images/mvc.png" width="800px">
	</article>
  </slide>  
  
  <slide class="segue dark nobackground">   
    <hgroup class="auto-fadein">
      <h2>Más sobre Rails</h2>
    </hgroup>
  </slide>
  
  <slide>
    <hgroup>
      <h2>Relaciones</h2>
    </hgroup>
	<article>
<pre class="prettyprint" data-lang="ruby">
has_many
has_one
belongs_to
</pre>		

<footer class="source">Más: <a href="http://guides.rubyonrails.org/association_basics.html
">Ruby on Rails Guides: Association Basics</a></footer>
	</article>
  </slide>    
  
    <slide>
    <hgroup>
      <h2>Relaciones</h2>
    </hgroup>
	<article>
	<ul class="build">
		<li>Se tiene un <b>User</b></li>
<pre class="prettyprint" data-lang="ruby">
class User < ActiveRecord::Base
  <b>has_many :orders</b>
end
</pre>	
<li>Se tiene <b>Orders</b></li>
<pre class="prettyprint" data-lang="ruby">
class Order < ActiveRecord::Base
  <b>belongs_to :user</b>
end
</pre>		
<li>Para acceder a las Order de un User específico</li>
<pre class="prettyprint" data-lang="ruby">
<b>@orders = @user.orders</b>
</pre>		
<li><h4 class="red">Automágicamente!</h4></li>
</ul>
	</article>
  </slide>

  <slide>
    <hgroup>
      <h2>Relaciones</h2>
	  <h3>Ojo!</h3>
    </hgroup>
	<article class="flexbox vcenter">
	<h2>No olvidar crear claves foráneas en las tablas</h2><br />
	<h5>La tabla Order debe tener una columna llamada <b>user_id</b></h5>
	</article>
  </slide>    
  
      <slide>
    <hgroup>
      <h2>Recuperar y Guardar Objetos</h2>
    </hgroup>
	<article>
	<ul class="build">
		<li>Buscar por <b>id</b>
<pre class="prettyprint" data-lang="ruby">
User.find(<b>id</b>)
</pre>	
<b>todas</b> las entidades tienen un id (<b>user_id</b>) automáticamente (y fecha de creación y actualización)</li>
<li>Buscar por atributo
<pre class="prettyprint" data-lang="ruby">
User.find_by_<b>nombre</b>(<i>valor</i>)
User.find_all_by_<b>nombre</b>(<i>valor</i>)
</pre>		
</li>
</ul>
<footer class="source">Más: <a href="http://guides.rubyonrails.org/active_record_querying.html
">Ruby on Rails Guides: Active Record Querying</a></footer>
	</article>
  </slide>  
  
        <slide>
    <hgroup>
      <h2>Recuperar y Guardar Objetos</h2>
    </hgroup>
	<article>
	<ul class="build">
<li>Otros
<pre class="prettyprint" data-lang="ruby">
User.first
User.where(:nombre => 'juan')
User.where(:nombre => 'juan').order("created_at DESC").limit(5)
</pre>		
</li>
<li>Guardar y eliminar
<pre class="prettyprint" data-lang="ruby">
@usuario.save
@usuario.destroy
</pre>		
</li>
</ul>
<footer class="source">Más: <a href="http://guides.rubyonrails.org/active_record_querying.html
">Ruby on Rails Guides: Active Record Querying</a></footer>
	</article>
  </slide>    
  
      <slide>
    <hgroup>
      <h2>Generación de código para vistas</h2>
    </hgroup>
	<article>
	<ul class="build">
		<li>link_to
<pre class="prettyprint" data-lang="ruby">
&lt;%= link_to 'Ingresar', login_url %&gt;
</pre>		
</li>
<li>button_to
<pre class="prettyprint" data-lang="ruby">
&lt;%= button_to 'Salir', logout_url, <b>:method => :delete</b> %&gt;
</pre>		
</li>
</ul>
	</article>
  </slide>
  
        <slide>
    <hgroup>
      <h2>Variables de Sesión</h2>
    </hgroup>
	<article>
	<ul class="build">
		<li>Guardar información en la sesión
<pre class="prettyprint" data-lang="ruby">
session[:user_id] = @usuario.id
</pre>		
</li>
<li>Recuperar información de la sesión
<pre class="prettyprint" data-lang="ruby">
session[:user_id]
</pre>		
</li>
</ul>
	</article>
  </slide>
  
    <slide>
    <hgroup>
      <h2>Templates</h2>
    </hgroup>
	<article>
	<ul class="build">
		<li>Todas las páginas parten de <b>app/views/layouts/application.html.erb</b></li>
		<li>Gracias a la función <b>yield</b> se inserta el código dentro de las plantillas</li>		
	</ul>
	</article>
  </slide>
  
  <slide>
    <hgroup>
      <h2>Scaffolding</h2>
    </hgroup>
	<article>
	<ul class="build">
		<li>En el directorio del proyecto</li>
<pre class="prettyprint" data-lang="bash">
rails generate scaffold <b>User</b> name:string age:integer birthday:date
rake db:migrate
</pre>
		<li>El scaffolding nos genera:
		<ul>
			<li>Tabla en la base de datos</li>
			<li>Vistas para ver, crear y editar objetos</li>
			<li>Controladores</li>
		</ul>
		</li>		
	</ul>
	</article>
  </slide>
  
  <slide class="segue dark nobackground">   
    <hgroup class="auto-fadein">
      <h2>Pero... ¿qué edito?</h2>
	  <h3>Demo time!</h3>
    </hgroup>
  </slide>
  
  <slide class="thank-you-slide segue nobackground">
    <article class="flexbox vleft auto-fadein">
      <h2>¿Preguntas?</h2>
      <p><a href="mailto:rpoo@alumnos.inf.utfsm.cl" class="white">rpoo@alumnos.inf.utfsm.cl</a></p>
	  <p>Presentación disponible en <a href="http://roberto.poo.cl/bd/rails-basics/" class="white">http://roberto.poo.cl/bd/rails-basics</a></p>
    </article>
    <p class="auto-fadein" data-config-contact>
      <!-- populated from slide_config.json -->
    </p>
  </slide>

  <slide class="backdrop"></slide>

</slides>

<script>
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-XXXXXXXX-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>

<!--[if IE]>
  <script src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js"></script>
  <script>CFInstall.check({mode: 'overlay'});</script>
<![endif]-->
</body>
</html>
